
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Onboarding & Digital Marketing ‚Äì Org Chart</title>
<style>
  :root {
    /* Evoke-inspired palette */
    --bg: #f4f7fb;
    --bg-alt: #ffffff;
    --primary: #269abc;        /* Eastern Blue */
    --primary-dark: #1a6f86;
    --primary-soft: rgba(38, 154, 188, 0.08);
    --accent: #0b0b25;         /* deep navy */
    --accent-soft: rgba(11, 11, 37, 0.06);
    --text-main: #111827;
    --text-muted: #6b7280;
    --border-subtle: #e5e7eb;
    --border-strong: #cbd5e1;
    --shadow-soft: 0 8px 22px rgba(15, 23, 42, 0.12);
    --shadow-elevated: 0 14px 32px rgba(15, 23, 42, 0.16);
    --radius-lg: 16px;
    --radius-xl: 20px;
    --radius-pill: 999px;
    --transition-fast: 160ms ease-out;
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background:
      radial-gradient(circle at top, #ffffff 0, #f4f7fb 55%, #edf2fb 100%);
    color: var(--text-main);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    padding: 24px;
  }

  .app-shell {
    max-width: 1800px;
    margin: 0 auto;
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .app-header {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    align-items: center;
    justify-content: space-between;
  }

  .title-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .title-pill {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.16em;
    color: var(--primary-dark);
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }

  .title-pill-dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: var(--primary);
  }

  .title {
    font-size: 22px;
    font-weight: 700;
    color: var(--accent);
  }

  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
  }

  .search-box {
    position: relative;
  }

  .search-input {
    padding: 7px 30px 7px 30px;
    border-radius: var(--radius-pill);
    border: 1px solid var(--border-subtle);
    background: #ffffff;
    color: var(--text-main);
    font-size: 13px;
    outline: none;
    min-width: 210px;
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.04);
  }

  .search-input::placeholder {
    color: var(--text-muted);
  }

  .search-icon {
    position: absolute;
    left: 9px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 13px;
    opacity: 0.6;
  }

  .clear-search {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 11px;
    cursor: pointer;
    opacity: 0.6;
    display: none;
  }

  .search-input:not(:placeholder-shown) ~ .clear-search {
    display: block;
  }

  .btn {
    border-radius: var(--radius-pill);
    border: 1px solid var(--primary);
    padding: 7px 12px;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: #ffffff;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition:
      transform var(--transition-fast),
      box-shadow var(--transition-fast),
      background var(--transition-fast),
      border-color var(--transition-fast);
    box-shadow: 0 8px 18px rgba(38, 154, 188, 0.35);
  }

  .btn span.icon {
    font-size: 12px;
  }

  .btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 26px rgba(15, 23, 42, 0.25);
  }

  .btn-secondary {
    background: #ffffff;
    color: var(--primary-dark);
    border-style: solid;
    border-color: var(--border-strong);
    box-shadow: 0 2px 8px rgba(15, 23, 42, 0.06);
  }

  .btn-secondary:hover {
    border-color: var(--primary);
    background: #f5fbff;
  }

  .legend {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    font-size: 11px;
  }

  .legend-item {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 9px;
    border-radius: var(--radius-pill);
    background: #ffffff;
    border: 1px solid var(--border-subtle);
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.04);
    color: var(--text-muted);
  }

  .pill-dot {
    width: 9px;
    height: 9px;
    border-radius: 50%;
  }

  .pill-dot-lead {
    background: var(--primary);
  }

  .pill-dot-team {
    background: #16a34a;
  }

  .pill-dot-open {
    background: #dc2626;
  }

  .pill-dot-sii {
    background: #f59e0b;
  }

  .root-card {
    background: #ffffff;
    border-radius: var(--radius-xl);
    padding: 14px 18px;
    border: 1px solid var(--border-subtle);
    box-shadow: var(--shadow-soft);
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .avatar {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    padding: 3px;
    position: relative;
  }

  .avatar-inner {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 18px;
    color: var(--primary-dark);
    letter-spacing: 0.12em;
  }

  .avatar-badge {
    position: absolute;
    right: -2px;
    bottom: -2px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: #16a34a;
    border: 2px solid #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    color: #ffffff;
  }

  .root-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 3px;
  }

  .root-name {
    font-weight: 700;
    font-size: 15px;
    color: var(--accent);
  }

  .root-role {
    font-size: 12px;
    color: var(--text-muted);
  }

  .root-meta {
    font-size: 11px;
    color: var(--text-muted);
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    align-items: center;
  }

  .root-chip {
    border-radius: var(--radius-pill);
    border: 1px solid var(--primary-soft);
    padding: 3px 9px;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    background: #f0f9ff;
    color: var(--primary-dark);
    display: inline-flex;
    align-items: center;
    gap: 5px;
  }

  .root-chip span.dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: var(--primary);
  }

  .totals-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
    justify-content: space-between;
    margin-top: 4px;
    font-size: 11px;
  }

  .totals-pillars {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .totals-chip {
    padding: 4px 9px;
    border-radius: var(--radius-pill);
    background: #ffffff;
    border: 1px solid var(--border-subtle);
    display: inline-flex;
    align-items: center;
    gap: 6px;
    color: var(--text-muted);
  }

  .totals-chip span.dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: var(--primary);
  }

  .totals-main {
    padding: 4px 11px;
    border-radius: var(--radius-pill);
    border: 1px solid var(--primary);
    background: #f0f9ff;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    color: var(--primary-dark);
  }

  .totals-main strong {
    color: var(--accent);
  }

  .chart-shell {
    margin-top: 8px;
    background: #ffffff;
    border-radius: var(--radius-xl);
    padding: 18px 16px 18px;
    border: 1px solid var(--border-subtle);
    box-shadow: var(--shadow-soft);
    overflow: auto;
    max-height: calc(100vh - 210px);
  }

  .pillars-row {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    align-items: stretch;
    justify-content: center;
  }

  .pillar {
    flex: 1 1 220px;
    max-width: 280px;
    background: #ffffff;
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-subtle);
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    cursor: default;
    transition:
      transform var(--transition-fast),
      box-shadow var(--transition-fast),
      border-color var(--transition-fast),
      background var(--transition-fast);
  }

  .pillar:hover {
    transform: translateY(-3px);
    border-color: var(--primary);
    box-shadow: var(--shadow-elevated);
  }

  .pillar-header {
    position: relative;
    padding: 11px 12px 9px;
    border-bottom: 1px solid var(--border-subtle);
    display: flex;
    flex-direction: column;
    gap: 4px;
    background: linear-gradient(
      135deg,
      rgba(38, 154, 188, 0.08),
      rgba(11, 11, 37, 0.02)
    );
  }

  .pillar-total {
    align-self: flex-start;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    padding: 2px 8px;
    border-radius: var(--radius-pill);
    border: 1px solid var(--primary);
    background: #ffffff;
    color: var(--primary-dark);
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }

  .pillar-total span.dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--primary);
  }

  .pillar-title {
    font-size: 13px;
    font-weight: 700;
    line-height: 1.3;
    padding-right: 30px;
    color: var(--accent);
  }

  .pillar-tagline {
    font-size: 11px;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
  }

  .tag-person {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 3px 8px;
    border-radius: var(--radius-pill);
    background: #ffffff;
    border: 1px solid var(--border-subtle);
    font-size: 10px;
  }

  .tag-person span.badge {
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: var(--primary);
  }

  .tag-metric {
    font-size: 10px;
    opacity: 0.8;
  }

  .chip-open {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    border-radius: var(--radius-pill);
    border: 1px solid #fecaca;
    padding: 2px 6px;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.09em;
    color: #b91c1c;
    background: #fef2f2;
  }

  .chip-open span.dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: #dc2626;
  }

  .toggle {
    position: absolute;
    right: 8px;
    top: 10px;
    width: 22px;
    height: 22px;
    border-radius: 999px;
    border: 1px solid var(--border-subtle);
    background: #ffffff;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    cursor: pointer;
    transition:
      background var(--transition-fast),
      transform var(--transition-fast),
      border-color var(--transition-fast),
      box-shadow var(--transition-fast);
    color: var(--text-muted);
  }

  .toggle:hover {
    background: #f3f4f6;
    transform: translateY(-1px);
    border-color: var(--primary);
    box-shadow: 0 3px 8px rgba(15, 23, 42, 0.15);
  }

  .toggle[data-open="true"] {
    background: #f0f9ff;
    border-color: var(--primary);
    color: var(--primary-dark);
  }

  .pillar-body {
    position: relative;
    padding: 6px 8px 10px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    font-size: 11px;
  }

  .children {
    max-height: 460px;
    overflow: hidden;
    transition: max-height 220ms ease-out, opacity 160ms ease-out;
    opacity: 1;
  }

  .children.collapsed {
    max-height: 0;
    opacity: 0;
  }

  .group-label {
    margin: 4px 2px 2px;
    padding: 2px 8px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    font-size: 9px;
    color: var(--text-muted);
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }

  .group-label::before {
    content: "";
    width: 14px;
    height: 1px;
    background: linear-gradient(
      to right,
      rgba(148, 163, 184, 0.45),
      rgba(38, 154, 188, 0.9)
    );
    border-radius: 99px;
  }

  .node {
    border-radius: 12px;
    padding: 6px 7px;
    margin: 3px 2px;
    border: 1px solid var(--border-subtle);
    background: #ffffff;
    display: flex;
    flex-direction: column;
    gap: 3px;
    position: relative;
    overflow: hidden;
    cursor: pointer;
    transition:
      transform var(--transition-fast),
      box-shadow var(--transition-fast),
      border-color var(--transition-fast),
      background var(--transition-fast);
  }

  .node:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 18px rgba(15, 23, 42, 0.12);
    border-color: var(--primary);
    background: #f9fafb;
  }

  .node-main {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 6px;
  }

  .node-title {
    font-size: 11px;
    font-weight: 600;
    color: var(--accent);
  }

  .node-role {
    font-size: 10px;
    color: var(--text-muted);
  }

  .node-meta {
    font-size: 9px;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 2px;
  }

  .node-chip {
    padding: 2px 6px;
    border-radius: var(--radius-pill);
    font-size: 9px;
    border: 1px solid var(--border-subtle);
    background: #f9fafb;
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }

  .node-chip.team {
    border-color: #d1fae5;
    background: #ecfdf5;
    color: #166534;
  }

  .node-chip.sii {
    border-color: #fef3c7;
    background: #fffbeb;
    color: #92400e;
  }

  .node-chip.open {
    border-color: #fecaca;
    background: #fef2f2;
    color: #b91c1c;
  }

  .badge-dot {
    width: 7px;
    height: 7px;
    border-radius: 999px;
    background: var(--primary);
  }

  .badge-dot.open {
    background: #dc2626;
  }

  .badge-dot.sii {
    background: #f59e0b;
  }

  .node-count {
    font-size: 9px;
    opacity: 0.85;
  }

  .search-hit {
    border-color: var(--primary) !important;
    box-shadow: 0 0 0 1px rgba(38, 154, 188, 0.5),
      0 0 14px rgba(38, 154, 188, 0.35) !important;
    background: #eff6ff;
  }

  .search-fade {
    opacity: 0.25;
    filter: grayscale(0.3);
  }

  /* Wide screens: force all 6 pillars into one horizontal row */
  @media (min-width: 1500px) {
    .chart-shell {
      max-height: none;
    }

    .pillars-row {
      flex-wrap: nowrap;
      justify-content: space-between;
    }

    .pillar {
      flex: 0 0 calc(100% / 6 - 10px);
      max-width: none;
    }
  }

  @media (max-width: 720px) {
    body {
      padding: 16px;
    }

    .chart-shell {
      max-height: none;
    }

    .app-header {
      align-items: flex-start;
    }
  }
</style>
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="title-group">
        <div class="title-pill">
          <span class="title-pill-dot"></span>
          Onboarding &amp; Digital Marketing ‚Äì Org Map
        </div>
        <div class="title">Organisation Overview</div>
      </div>

      <div class="controls">
        <div class="search-box">
          <span class="search-icon">üîç</span>
          <input
            id="search"
            class="search-input"
            type="text"
            placeholder="Search by name, role, pillar‚Ä¶"
            autocomplete="off"
          />
          <span id="clearSearch" class="clear-search">‚úï</span>
        </div>

        <button id="toggleAllBtn" class="btn btn-secondary" type="button">
          <span class="icon">‚ñæ</span>
          Toggle all pillars
        </button>
      </div>
    </header>

    <section class="legend">
      <div class="legend-item">
        <span class="pill-dot pill-dot-lead"></span>
        Lead / GM / TL
      </div>
      <div class="legend-item">
        <span class="pill-dot pill-dot-team"></span>
        Team headcount
      </div>
      <div class="legend-item">
        <span class="pill-dot pill-dot-open"></span>
        Open role
      </div>
      <div class="legend-item">
        <span class="pill-dot pill-dot-sii"></span>
        SII / specialised capacity
      </div>
    </section>

    <section class="root-card">
      <div class="avatar">
        <div class="avatar-inner">SD</div>
        <div class="avatar-badge">‚òÖ</div>
      </div>
      <div class="root-main">
        <div class="root-name">Shmuel Daniel</div>
        <div class="root-role">Head of Onboarding &amp; Digital Marketing</div>
        <div class="root-meta">
          <div class="root-chip">
            <span class="dot"></span>
            6 Operational Pillars
          </div>
          <div>
            Funnel &amp; CX ‚Ä¢ Site Infra ‚Ä¢ Automation / AI ‚Ä¢ Adtech ‚Ä¢ WH Onboarding ‚Ä¢ WH CX
          </div>
        </div>
      </div>
    </section>

    <section class="totals-bar">
      <div class="totals-pillars">
        <div class="totals-chip">
          <span class="dot"></span>
          Funnel &amp; CX: <strong>30</strong>
        </div>
        <div class="totals-chip">
          <span class="dot"></span>
          Site Infra: <strong>1</strong>
        </div>
        <div class="totals-chip">
          <span class="dot"></span>
          Automation &amp; AI: <strong>3</strong>
        </div>
        <div class="totals-chip">
          <span class="dot"></span>
          Adtech: <strong>3</strong>
        </div>
        <div class="totals-chip">
          <span class="dot"></span>
          WH Onboarding: <strong>25</strong>
        </div>
        <div class="totals-chip">
          <span class="dot"></span>
          WH CX: <strong>3</strong>
        </div>
      </div>
      <div class="totals-main">
        Total headcount (excl. open roles): <strong>65</strong>
      </div>
    </section>

    <main class="chart-shell" id="orgChart">
      <div class="pillars-row">
        <!-- 1. Funnel & CX Management -->
        <article class="pillar" data-pillar="funnel-cx">
          <header class="pillar-header">
            <div class="pillar-total">
              <span class="dot"></span>
              Total: 30
            </div>
            <div class="pillar-title">
              Funnel &amp; Customer Experience (CX) Management
            </div>
            <div class="pillar-tagline">
              <span class="tag-person">
                <span class="badge"></span>
                Led by: <strong>Oana R</strong>, Funnel &amp; CX GM
              </span>
              <span class="tag-metric">4 Funnel TLs ‚Ä¢ SLS Team</span>
            </div>
            <button class="toggle" type="button" data-open="true" aria-label="Collapse pillar">
              ‚ñ¥
            </button>
          </header>
          <div class="pillar-body">
            <div class="children">
              <div class="group-label">Direct teams</div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">SLS Team</div>
                    <div class="node-role">Direct Team reporting to Oana R</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    2 People
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">2 specialists focused on SLS</span>
                </div>
              </div>

              <div class="group-label">Funnel Team Leaders</div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Moshe S</div>
                    <div class="node-role">Funnel 1 TL</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    6 People
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">Manages 6 People</span>
                </div>
              </div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Marian C</div>
                    <div class="node-role">Funnel 2 TL</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    5 People
                  </div>
                  <div class="node-chip sii">
                    <span class="badge-dot sii"></span>
                    +3 SII
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">Manages 5 People + 3 SII</span>
                </div>
              </div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Adrian I</div>
                    <div class="node-role">Funnel 3 TL</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    9 People
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">Manages 9 People</span>
                </div>
              </div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Open Position</div>
                    <div class="node-role">CX 888 TL</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    5 People
                  </div>
                  <div class="node-chip open">
                    <span class="badge-dot open"></span>
                    Hiring
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">Future: CX 888 TL managing 5 People</span>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- 2. Site Infrastructure (separate pillar) -->
        <article class="pillar" data-pillar="site-infra">
          <header class="pillar-header">
            <div class="pillar-total">
              <span class="dot"></span>
              Total: 1
            </div>
            <div class="pillar-title">Site Infrastructure</div>
            <div class="pillar-tagline">
              <span class="tag-person">
                <span class="badge"></span>
                Function owner: <strong>Liron W</strong>
              </span>
              <span class="tag-metric">Platform &amp; site foundations</span>
            </div>
            <button class="toggle" type="button" data-open="true">
              ‚ñ¥
            </button>
          </header>
          <div class="pillar-body">
            <div class="children">
              <div class="group-label">Site Infra Function</div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Liron W</div>
                    <div class="node-role">Site Infra</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    1 Person
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">Owns Site Infrastructure</span>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- 3. Automation & AI (separate pillar) -->
        <article class="pillar" data-pillar="automation-ai">
          <header class="pillar-header">
            <div class="pillar-total">
              <span class="dot"></span>
              Total: 3
            </div>
            <div class="pillar-title">Automation &amp; AI</div>
            <div class="pillar-tagline">
              <span class="tag-person">
                <span class="badge"></span>
                Led by: <strong>Cosmin L</strong>, Automation &amp; AI TL
              </span>
              <span class="tag-metric">Automation &amp; AI team</span>
            </div>
            <button class="toggle" type="button" data-open="true">
              ‚ñ¥
            </button>
          </header>
          <div class="pillar-body">
            <div class="children">
              <div class="group-label">Automation &amp; AI Team</div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Cosmin L</div>
                    <div class="node-role">Automation &amp; AI TL</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    3 People
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">Leads Automation &amp; AI team (3 People)</span>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- 4. Adtech -->
        <article class="pillar" data-pillar="adtech">
          <header class="pillar-header">
            <div class="pillar-total">
              <span class="dot"></span>
              Total: 3
            </div>
            <div class="pillar-title">Adtech</div>
            <div class="pillar-tagline">
              <span class="tag-person">
                <span class="badge"></span>
                Led by: <strong>Sabin B</strong>, Adtech TL
              </span>
              <span class="tag-metric">Ad technology &amp; tooling</span>
            </div>
            <button class="toggle" type="button" data-open="true">
              ‚ñ¥
            </button>
          </header>
          <div class="pillar-body">
            <div class="children">
              <div class="group-label">Adtech Team</div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Sabin B</div>
                    <div class="node-role">Adtech TL</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    3 People
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">Manages 3 People</span>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- 5. WH Onboarding (without WH CX) -->
        <article class="pillar" data-pillar="wh-onboarding">
          <header class="pillar-header">
            <div class="pillar-total">
              <span class="dot"></span>
              Total: 25
            </div>
            <div class="pillar-title">WH Onboarding Management</div>
            <div class="pillar-tagline">
              <span class="tag-person">
                <span class="badge"></span>
                General Manager: <strong>Marcin I</strong>, WH Onboarding GM
              </span>
              <span class="tag-metric">Principals ‚Ä¢ Onboarding TLs ‚Ä¢ SII capacity</span>
            </div>
            <button class="toggle" type="button" data-open="true">
              ‚ñ¥
            </button>
          </header>
          <div class="pillar-body">
            <div class="children">
              <div class="group-label">WH Onboarding teams (reporting to GM)</div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">WH Onboarding Principals</div>
                    <div class="node-role">Senior WH Onboarding principals</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    2 People
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">2 WH Onboarding Principals</span>
                </div>
              </div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Bart</div>
                    <div class="node-role">WH Volcanics TL</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    5 People
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">Manages 5 People</span>
                </div>
              </div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Open Position</div>
                    <div class="node-role">Customer Ver TL</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    9 People
                  </div>
                  <div class="node-chip sii">
                    <span class="badge-dot sii"></span>
                    +1 SII SCV
                  </div>
                  <div class="node-chip open">
                    <span class="badge-dot open"></span>
                    Hiring
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">
                    Future: Customer Verification TL (9 People + 1 SII SCV)
                  </span>
                </div>
              </div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Vasyl S</div>
                    <div class="node-role">WH Onboarding TL</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    4 People
                  </div>
                  <div class="node-chip sii">
                    <span class="badge-dot sii"></span>
                    +4 SII CLCM
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">Manages 4 People + 4 SII CLCM</span>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- 6. WH CX (separate pillar with Michal Z) -->
        <article class="pillar" data-pillar="wh-cx">
          <header class="pillar-header">
            <div class="pillar-total">
              <span class="dot"></span>
              Total: 3
            </div>
            <div class="pillar-title">WH CX Management</div>
            <div class="pillar-tagline">
              <span class="tag-person">
                <span class="badge"></span>
                Led by: <strong>Michal Z</strong>, WH CX TL
              </span>
              <span class="tag-metric">CX team &amp; open roles</span>
            </div>
            <button class="toggle" type="button" data-open="true">
              ‚ñ¥
            </button>
          </header>
          <div class="pillar-body">
            <div class="children">
              <div class="group-label">WH CX Team</div>

              <div class="node" data-node>
                <div class="node-main">
                  <div>
                    <div class="node-title">Michal Z</div>
                    <div class="node-role">WH CX TL</div>
                  </div>
                  <div class="node-chip team">
                    <span class="badge-dot"></span>
                    3 People
                  </div>
                  <div class="node-chip open">
                    <span class="badge-dot open"></span>
                    +3 Open
                  </div>
                </div>
                <div class="node-meta">
                  <span class="node-count">WH CX team: 3 People + 3 open positions</span>
                </div>
              </div>
            </div>
          </div>
        </article>
      </div>
    </main>
  </div>

  <script>
    (function () {
      const toggles = document.querySelectorAll(".toggle");
      const searchInput = document.getElementById("search");
      const clearSearch = document.getElementById("clearSearch");
      const toggleAllBtn = document.getElementById("toggleAllBtn");
      const orgChart = document.getElementById("orgChart");

      toggles.forEach((btn) => {
        btn.addEventListener("click", () => {
          const pillar = btn.closest(".pillar");
          const children = pillar.querySelector(".children");
          const isOpen = btn.getAttribute("data-open") === "true";

          if (isOpen) {
            children.classList.add("collapsed");
            btn.setAttribute("data-open", "false");
            btn.textContent = "‚ñæ";
          } else {
            children.classList.remove("collapsed");
            btn.setAttribute("data-open", "true");
            btn.textContent = "‚ñ¥";
          }
        });
      });

      toggleAllBtn.addEventListener("click", () => {
        const allChildren = document.querySelectorAll(".pillar .children");
        const openStates = Array.from(document.querySelectorAll(".toggle")).map((t) =>
          t.getAttribute("data-open")
        );
        const allOpen = openStates.every((s) => s === "true");
        const newStateOpen = !allOpen;

        allChildren.forEach((ch) =>
          ch.classList.toggle("collapsed", !newStateOpen)
        );
        document.querySelectorAll(".toggle").forEach((btn) => {
          btn.setAttribute("data-open", newStateOpen ? "true" : "false");
          btn.textContent = newStateOpen ? "‚ñ¥" : "‚ñæ";
        });
      });

      function normalise(str) {
        return str
          .toLowerCase()
          .normalize("NFD")
          .replace(/\p{Diacritic}/gu, "");
      }

      function applySearchFilter(query) {
        const nodes = orgChart.querySelectorAll("[data-node], .pillar");
        const trimmed = query.trim();

        if (!trimmed) {
          nodes.forEach((el) => {
            el.classList.remove("search-hit", "search-fade");
          });
          return;
        }

        const q = normalise(trimmed);
        const hits = [];

        nodes.forEach((el) => {
          const text = normalise(el.textContent || "");
          const isHit = text.includes(q);
          if (isHit) hits.push(el);
        });

        if (!hits.length) {
          nodes.forEach((el) => {
            el.classList.remove("search-hit");
            el.classList.add("search-fade");
          });
          return;
        }

        nodes.forEach((el) => {
          el.classList.remove("search-hit", "search-fade");
        });

        const hitSet = new Set(hits);
        nodes.forEach((el) => {
          if (hitSet.has(el)) {
            el.classList.add("search-hit");
          } else {
            el.classList.add("search-fade");
          }
        });

        hits.forEach((hit) => {
          const pillar = hit.closest(".pillar");
          if (!pillar) return;
          const children = pillar.querySelector(".children");
          const toggle = pillar.querySelector(".toggle");
          if (children && children.classList.contains("collapsed")) {
            children.classList.remove("collapsed");
            toggle.setAttribute("data-open", "true");
            toggle.textContent = "‚ñ¥";
          }
        });
      }

      searchInput.addEventListener("input", (e) => {
        applySearchFilter(e.target.value);
      });

      clearSearch.addEventListener("click", () => {
        searchInput.value = "";
        applySearchFilter("");
        searchInput.focus();
      });

      orgChart.querySelectorAll("[data-node]").forEach((node) => {
        node.addEventListener("click", () => {
          node.scrollIntoView({ behavior: "smooth", block: "center" });
        });
      });
    })();
  </script>
</body>
</html>
